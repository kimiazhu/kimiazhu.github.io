---
layout:     post
title:      "Vim FAQ"
date:       2016-05-16 10:28:00 +08:00
lastmod: 	2016-05-16 10:28:00 +08:00
author:     "KC"
header-img: "img/post-bg-unix-linux.jpg"
tags:
    - Vim
    - Linux
---

# 目录：
{:.no_toc}
* any list
{:toc}

# 1. Multiple Windows

分屏操作使用`Ctrl+w`进行控制。

## 1.1 启动时分屏

通过-O(大写)指定垂直分屏，-o(小写)指定水平分屏。

```bash
# 垂直分2屏幕，分别编辑file1和file2
vim -O2 file1 file2 

# 水平分3屏幕，分别编辑file1、file2和file3
vim -o3 file1 file2 file3
```

## 1.2 关闭分屏

```bash
# 关闭当前分屏，当若当前已是最后一个分屏则不会退出
Ctrl+w c

# 关闭当前分屏，如果只剩最后一个了，则退出Vim
Ctrl+w q
```

## 1.3 编辑文件时增加分屏

```bash
# 水平分割当前打开的文件
Ctrl+w s

# 水平分割窗口，并在新窗口打开一个新的文件。
:sp filename

# 垂直分割当前打开的文件
Ctrl+w v

# 垂直分割窗口，并在新窗口打开一个新的文件。
:vsp filename
```

## 1.4 在分屏间移动光标

Vim中的光标键是`h, j, k, l`，要在各个屏间切换，只需要先按一下`Ctrl+w`

```bash
# 光标左移
Ctrl+w h

# 光标右移
Ctrl+w l

# 光标上移
Ctrl+w k

# 光标下移
Ctrl+w j

# 光标移动到下一个分屏中
Ctrl+w w
```

> BTW：
> 
> 移动屏幕本身也是`H, J, K, L`四个键，但是移动光标是小写，移动窗体是大写。

## 1.5 调节屏幕尺寸

```bash
# 让所有窗口等大
Ctrl+w =

# 增加当前窗口高度
Ctrl+w +

# 减小当前窗口高度
Ctrl+w -

# 增加当前窗口宽度
Ctrl+w >

# 减小当前窗口宽度
Ctrl+w <
```

## 1.6 分屏中打开目录

在编辑文件的时候，可以使用命令在新的分屏中浏览当前文件所在目录。

```bash
# 水平分屏，在下部窗口中浏览目录
:He

# 水平分屏，在上部窗口中浏览目录
:He!

# 垂直分屏，在左侧窗口中浏览目录
:Ve

# 垂直分屏，在右侧窗口中浏览目录
:Ve!
```

## 1.7 分屏同步移动光标

要同步光标，注意应该先将要同步的分屏的光标移动到需要的位置，然后在多个分屏中分别执行命令：

```bash
# 设置同步移动
:set scb

# 解开同步移动的配置
:set scb!
```

## 1.8 Tab分屏

```bash
# 打开新的Tab页
:Te

# 同时以tab的方式打开多个文件
vim -p file1 file2 file3

# 跳转到下一个Tab页，注意没有分号
gt

# 跳转到上一个Tab页，注意没有分号
gT

# 跳转到指定Tab页，注意没有分号，n是具体数字
{n}gt
# 或者：
:tabm {n}

# 浏览当前所有tab页的概况：
:tabs

# 关闭Tab页，如果后面指定了数字，那就关闭指定页，如果没有就关闭当前页
:tabclose {n}
```

> BTW
>
> 1. 关于切换tab页，gvim使用`Ctrl+PageDown`和`Ctrl+PageUp`来进行切换
> 
> 2. 如果你想把buffer中的文件全转成tab的话，你可以使用下面的命令:
> `:bufdo tab split`

# 2. 缓冲区

# 2.1 

用`:E`命令浏览目录时打开的文件都保存在缓冲区中。可以用以下命令查看缓冲区内容：

![查看缓冲期内容](/attachments/2016-05-16/vim-1.png)

```bash
# 查看缓冲区，其中标有`%a`的一行表示当前激活状态的缓冲区。
# :ls输出如上图。
:ls

# 切换到指定缓冲区继续编辑文件, n代表缓冲区编号，在ls命令中能看到
:buffer {n}
# 或者:(filepath是文件路径，在ls命令中能看到)
:buffer {filepath}
```

还可以使用以下命令快速在缓冲区间切换：
```bash
# 移动到下一缓冲区，缩写为`:bn`
:bnext

# 移动到上一缓冲区，缩写为`:bp`
:bprevious

# 移动到最后一个缓冲区文件，缩写为`:bl`
:blast

# 移动到第一个缓冲区文件，缩写为`:bf`
:bfirst
```

前面我们提到一个`%a`标识符，这个表示当前被激活的文件。相关的标记还有：

```
- – （非活动的缓冲区）
- a （当前被激活缓冲区）
- h （隐藏的缓冲区）
- % （当前的缓冲区）
- # （交换缓冲区）
- = （只读缓冲区）
- + （已经更改的缓冲区）
```